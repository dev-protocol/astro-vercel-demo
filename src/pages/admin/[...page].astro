---
import Admin from '@devprotocol/clubs-core/admin'
import { adminFactory } from '@devprotocol/clubs-core'
import { config as _config } from '@fixtures/config'
import admin from '@plugins/admin'
import community from '@plugins/community'
import membership from '@plugins/membership'
import quests from '@plugins/quests'
import home from '@plugins/home'

export const { getStaticPaths } = adminFactory({
  config: async () => _config(),
  plugins: {
    admin,
    quests,
    community,
    membership,
    home,
  },
})

const Content = Astro.props.component
---

<Admin {...Astro.props}>
  <Content {...Astro.props} />
</Admin>

<script>
  import { onSubmitConfig } from '@devprotocol/clubs-core'

  onSubmitConfig(async (data, onFinish) => {
    console.log({ data, onFinish })
  })
</script>
